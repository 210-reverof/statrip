<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.wonsi.statrip.model.repository.plan.PlanRepository">

	<insert id="insertPlan" useGeneratedKeys="true" keyProperty="planId" keyColumn="plan_id">
		INSERT INTO plan (user_id, title, created_at)
  		VALUES (#{userId}, #{title}, NOW())
	</insert>
	
	<insert id="insertPlanPresent1">
  		UPDATE plan 
  		SET present1 = #{attractionId}
	    WHERE plan_id = #{planId}
	</insert>
  	
  	<insert id="insertPlanPresent2">
	    UPDATE plan 
  		SET present2 = #{attractionId}
	    WHERE plan_id = #{planId}
  	</insert>
  	
  	<insert id="insertPlanPresent3">
	    UPDATE plan 
  		SET present3 = #{attractionId}
	    WHERE plan_id = #{planId}
  	</insert>
	
	<insert id="insertPlanAttrs">
	    INSERT INTO plan_relation (plan_id, attraction_id, ord) 
	    VALUES(#{param1}, #{param2}, #{param3})
  	</insert>
  	
  	<select id="selectMyList" parameterType="String" resultType="PlanDto">
		SELECT route_id AS routeId, user_id AS userId, title, created_at AS createdAt
		FROM route
		WHERE user_id = #{userId}
	</select>
	
	

</mapper>